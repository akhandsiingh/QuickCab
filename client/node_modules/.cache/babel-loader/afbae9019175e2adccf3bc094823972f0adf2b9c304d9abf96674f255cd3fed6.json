{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"D:\\\\mern\\\\cab-booking-app\\\\client\\\\src\\\\pages\\\\BookCab.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport Map from \"../components/Map\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst BookCab = () => {\n  _s();\n  const [pickup, setPickup] = useState(null);\n  const [destination, setDestination] = useState(null);\n  const [pickupAddress, setPickupAddress] = useState(\"\");\n  const [destinationAddress, setDestinationAddress] = useState(\"\");\n  const [cabOptions, setCabOptions] = useState([]);\n  const [selectedCab, setSelectedCab] = useState(null);\n  const [fare, setFare] = useState(null);\n  const [distance, setDistance] = useState(null);\n  const [duration, setDuration] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const navigate = useNavigate();\n  useEffect(() => {\n    // Fetch cab options when component mounts\n    const fetchCabOptions = async () => {\n      try {\n        const res = await axios.get(\"/api/cabs\");\n        setCabOptions(res.data);\n      } catch (err) {\n        console.error(\"Error fetching cab options:\", err);\n        setError(\"Failed to load cab options\");\n      }\n    };\n    fetchCabOptions();\n  }, []);\n  useEffect(() => {\n    // Calculate fare when both pickup and destination are set\n    if (pickup && destination) {\n      calculateFare();\n    }\n  }, [pickup, destination, selectedCab]);\n  const handleLocationSelect = (type, location) => {\n    if (type === \"pickup\") {\n      setPickup(location);\n      // Get address from coordinates\n      getAddressFromCoordinates(location, setPickupAddress);\n    } else if (type === \"destination\") {\n      setDestination(location);\n      // Get address from coordinates\n      getAddressFromCoordinates(location, setDestinationAddress);\n    }\n  };\n  const getAddressFromCoordinates = async (location, setAddress) => {\n    try {\n      const response = await axios.get(`https://maps.googleapis.com/maps/api/geocode/json?latlng=${location.lat},${location.lng}&key=YOUR_GOOGLE_MAPS_API_KEY`);\n      if (response.data.results && response.data.results.length > 0) {\n        setAddress(response.data.results[0].formatted_address);\n      }\n    } catch (error) {\n      console.error(\"Error getting address:\", error);\n    }\n  };\n  const calculateFare = async () => {\n    if (!pickup || !destination) return;\n    try {\n      setLoading(true);\n\n      // Calculate distance and duration using Google Maps Distance Matrix API\n      const response = await axios.get(`https://maps.googleapis.com/maps/api/distancematrix/json?origins=${pickup.lat},${pickup.lng}&destinations=${destination.lat},${destination.lng}&mode=driving&key=YOUR_GOOGLE_MAPS_API_KEY`);\n      if (response.data.rows && response.data.rows[0].elements && response.data.rows[0].elements[0].status === \"OK\") {\n        const distanceValue = response.data.rows[0].elements[0].distance.value; // in meters\n        const durationValue = response.data.rows[0].elements[0].duration.value; // in seconds\n\n        // Convert to kilometers and minutes\n        const distanceInKm = distanceValue / 1000;\n        const durationInMinutes = Math.ceil(durationValue / 60);\n        setDistance(distanceInKm);\n        setDuration(durationInMinutes);\n\n        // Calculate fare for each cab type\n        const updatedCabOptions = cabOptions.map(cab => {\n          // Base fare + per km rate + per minute rate\n          const calculatedFare = cab.baseFare + distanceInKm * cab.perKmRate + durationInMinutes * cab.perMinuteRate;\n          return {\n            ...cab,\n            calculatedFare: Math.ceil(calculatedFare) // Round up to nearest rupee\n          };\n        });\n        setCabOptions(updatedCabOptions);\n\n        // If a cab is already selected, update its fare\n        if (selectedCab) {\n          const selectedCabUpdated = updatedCabOptions.find(cab => cab.id === selectedCab.id);\n          if (selectedCabUpdated) {\n            setSelectedCab(selectedCabUpdated);\n            setFare(selectedCabUpdated.calculatedFare);\n          }\n        }\n      } else {\n        setError(\"Could not calculate distance. Please try different locations.\");\n      }\n    } catch (err) {\n      console.error(\"Error calculating fare:\", err);\n      setError(\"Failed to calculate fare\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleCabSelect = cab => {\n    setSelectedCab(cab);\n    setFare(cab.calculatedFare);\n  };\n  const handleBooking = async () => {\n    if (!pickup || !destination || !selectedCab) {\n      setError(\"Please select pickup, destination and cab type\");\n      return;\n    }\n    try {\n      setLoading(true);\n      const bookingData = {\n        pickup: {\n          coordinates: pickup,\n          address: pickupAddress\n        },\n        destination: {\n          coordinates: destination,\n          address: destinationAddress\n        },\n        cabType: selectedCab.id,\n        fare: fare,\n        distance: distance,\n        duration: duration\n      };\n      const res = await axios.post(\"/api/bookings\", bookingData);\n\n      // Navigate to ride details page\n      navigate(`/ride/${res.data._id}`);\n    } catch (err) {\n      console.error(\"Error booking cab:\", err);\n      setError(\"Failed to book cab. Please try again.\");\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"book-cab-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"form-title\",\n      children: \"Book a Cab\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"alert alert-danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"location-inputs\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"pickup-input\",\n          children: \"Pickup Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"pickup-input\",\n          type: \"text\",\n          className: \"form-control\",\n          placeholder: \"Enter pickup location\",\n          value: pickupAddress,\n          onChange: e => setPickupAddress(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"destination-input\",\n          children: \"Destination\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          id: \"destination-input\",\n          type: \"text\",\n          className: \"form-control\",\n          placeholder: \"Enter destination\",\n          value: destinationAddress,\n          onChange: e => setDestinationAddress(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Map, {\n      pickup: pickup,\n      destination: destination,\n      onLocationSelect: handleLocationSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }, this), distance && duration && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"trip-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Distance: \", distance.toFixed(2), \" km\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Estimated Time: \", duration, \" minutes\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 9\n    }, this), cabOptions.length > 0 && distance && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Select Cab Type\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"cab-options\",\n        children: cabOptions.map(cab => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `cab-option ${selectedCab && selectedCab.id === cab.id ? \"selected\" : \"\"}`,\n          onClick: () => handleCabSelect(cab),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cab-option-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"cab-option-name\",\n              children: cab.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"cab-option-price\",\n              children: [\"\\u20B9\", cab.calculatedFare]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 215,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cab-option-details\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: cab.description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 220,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"Capacity: \", cab.capacity, \" persons\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 219,\n            columnNumber: 17\n          }, this)]\n        }, cab.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true), selectedCab && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"booking-summary\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Booking Summary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Cab Type: \", selectedCab.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Pickup: \", pickupAddress]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Destination: \", destinationAddress]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Distance: \", distance.toFixed(2), \" km\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Estimated Time: \", duration, \" minutes\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Fare: \\u20B9\", fare]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn btn-primary btn-block\",\n        onClick: handleBooking,\n        disabled: loading,\n        children: loading ? \"Processing...\" : \"Book Now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n};\n_s(BookCab, \"VmqEQZcKhV2pI7U1O7re57sNKRc=\", false, function () {\n  return [useNavigate];\n});\n_c = BookCab;\nexport default BookCab;\nvar _c;\n$RefreshReg$(_c, \"BookCab\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","useEffect","useNavigate","axios","Map","jsxDEV","_jsxDEV","Fragment","_Fragment","BookCab","pickup","setPickup","destination","setDestination","pickupAddress","setPickupAddress","destinationAddress","setDestinationAddress","cabOptions","setCabOptions","selectedCab","setSelectedCab","fare","setFare","distance","setDistance","duration","setDuration","loading","setLoading","error","setError","navigate","fetchCabOptions","res","get","data","err","console","calculateFare","handleLocationSelect","type","location","getAddressFromCoordinates","setAddress","response","lat","lng","results","length","formatted_address","rows","elements","status","distanceValue","value","durationValue","distanceInKm","durationInMinutes","Math","ceil","updatedCabOptions","map","cab","calculatedFare","baseFare","perKmRate","perMinuteRate","selectedCabUpdated","find","id","handleCabSelect","handleBooking","bookingData","coordinates","address","cabType","post","_id","className","children","fileName","lineNumber","columnNumber","htmlFor","placeholder","onChange","e","target","onLocationSelect","toFixed","onClick","name","description","capacity","disabled","_c","$RefreshReg$"],"sources":["D:/mern/cab-booking-app/client/src/pages/BookCab.js"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\nimport axios from \"axios\"\nimport Map from \"../components/Map\"\n\nconst BookCab = () => {\n  const [pickup, setPickup] = useState(null)\n  const [destination, setDestination] = useState(null)\n  const [pickupAddress, setPickupAddress] = useState(\"\")\n  const [destinationAddress, setDestinationAddress] = useState(\"\")\n  const [cabOptions, setCabOptions] = useState([])\n  const [selectedCab, setSelectedCab] = useState(null)\n  const [fare, setFare] = useState(null)\n  const [distance, setDistance] = useState(null)\n  const [duration, setDuration] = useState(null)\n  const [loading, setLoading] = useState(false)\n  const [error, setError] = useState(\"\")\n\n  const navigate = useNavigate()\n\n  useEffect(() => {\n    // Fetch cab options when component mounts\n    const fetchCabOptions = async () => {\n      try {\n        const res = await axios.get(\"/api/cabs\")\n        setCabOptions(res.data)\n      } catch (err) {\n        console.error(\"Error fetching cab options:\", err)\n        setError(\"Failed to load cab options\")\n      }\n    }\n\n    fetchCabOptions()\n  }, [])\n\n  useEffect(() => {\n    // Calculate fare when both pickup and destination are set\n    if (pickup && destination) {\n      calculateFare()\n    }\n  }, [pickup, destination, selectedCab])\n\n  const handleLocationSelect = (type, location) => {\n    if (type === \"pickup\") {\n      setPickup(location)\n      // Get address from coordinates\n      getAddressFromCoordinates(location, setPickupAddress)\n    } else if (type === \"destination\") {\n      setDestination(location)\n      // Get address from coordinates\n      getAddressFromCoordinates(location, setDestinationAddress)\n    }\n  }\n\n  const getAddressFromCoordinates = async (location, setAddress) => {\n    try {\n      const response = await axios.get(\n        `https://maps.googleapis.com/maps/api/geocode/json?latlng=${location.lat},${location.lng}&key=YOUR_GOOGLE_MAPS_API_KEY`,\n      )\n\n      if (response.data.results && response.data.results.length > 0) {\n        setAddress(response.data.results[0].formatted_address)\n      }\n    } catch (error) {\n      console.error(\"Error getting address:\", error)\n    }\n  }\n\n  const calculateFare = async () => {\n    if (!pickup || !destination) return\n\n    try {\n      setLoading(true)\n\n      // Calculate distance and duration using Google Maps Distance Matrix API\n      const response = await axios.get(\n        `https://maps.googleapis.com/maps/api/distancematrix/json?origins=${pickup.lat},${pickup.lng}&destinations=${destination.lat},${destination.lng}&mode=driving&key=YOUR_GOOGLE_MAPS_API_KEY`,\n      )\n\n      if (response.data.rows && response.data.rows[0].elements && response.data.rows[0].elements[0].status === \"OK\") {\n        const distanceValue = response.data.rows[0].elements[0].distance.value // in meters\n        const durationValue = response.data.rows[0].elements[0].duration.value // in seconds\n\n        // Convert to kilometers and minutes\n        const distanceInKm = distanceValue / 1000\n        const durationInMinutes = Math.ceil(durationValue / 60)\n\n        setDistance(distanceInKm)\n        setDuration(durationInMinutes)\n\n        // Calculate fare for each cab type\n        const updatedCabOptions = cabOptions.map((cab) => {\n          // Base fare + per km rate + per minute rate\n          const calculatedFare = cab.baseFare + distanceInKm * cab.perKmRate + durationInMinutes * cab.perMinuteRate\n          return {\n            ...cab,\n            calculatedFare: Math.ceil(calculatedFare), // Round up to nearest rupee\n          }\n        })\n\n        setCabOptions(updatedCabOptions)\n\n        // If a cab is already selected, update its fare\n        if (selectedCab) {\n          const selectedCabUpdated = updatedCabOptions.find((cab) => cab.id === selectedCab.id)\n          if (selectedCabUpdated) {\n            setSelectedCab(selectedCabUpdated)\n            setFare(selectedCabUpdated.calculatedFare)\n          }\n        }\n      } else {\n        setError(\"Could not calculate distance. Please try different locations.\")\n      }\n    } catch (err) {\n      console.error(\"Error calculating fare:\", err)\n      setError(\"Failed to calculate fare\")\n    } finally {\n      setLoading(false)\n    }\n  }\n\n  const handleCabSelect = (cab) => {\n    setSelectedCab(cab)\n    setFare(cab.calculatedFare)\n  }\n\n  const handleBooking = async () => {\n    if (!pickup || !destination || !selectedCab) {\n      setError(\"Please select pickup, destination and cab type\")\n      return\n    }\n\n    try {\n      setLoading(true)\n\n      const bookingData = {\n        pickup: {\n          coordinates: pickup,\n          address: pickupAddress,\n        },\n        destination: {\n          coordinates: destination,\n          address: destinationAddress,\n        },\n        cabType: selectedCab.id,\n        fare: fare,\n        distance: distance,\n        duration: duration,\n      }\n\n      const res = await axios.post(\"/api/bookings\", bookingData)\n\n      // Navigate to ride details page\n      navigate(`/ride/${res.data._id}`)\n    } catch (err) {\n      console.error(\"Error booking cab:\", err)\n      setError(\"Failed to book cab. Please try again.\")\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"book-cab-container\">\n      <h2 className=\"form-title\">Book a Cab</h2>\n\n      {error && <div className=\"alert alert-danger\">{error}</div>}\n\n      <div className=\"location-inputs\">\n        <div className=\"form-group\">\n          <label htmlFor=\"pickup-input\">Pickup Location</label>\n          <input\n            id=\"pickup-input\"\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Enter pickup location\"\n            value={pickupAddress}\n            onChange={(e) => setPickupAddress(e.target.value)}\n          />\n        </div>\n\n        <div className=\"form-group\">\n          <label htmlFor=\"destination-input\">Destination</label>\n          <input\n            id=\"destination-input\"\n            type=\"text\"\n            className=\"form-control\"\n            placeholder=\"Enter destination\"\n            value={destinationAddress}\n            onChange={(e) => setDestinationAddress(e.target.value)}\n          />\n        </div>\n      </div>\n\n      <Map pickup={pickup} destination={destination} onLocationSelect={handleLocationSelect} />\n\n      {distance && duration && (\n        <div className=\"trip-info\">\n          <p>Distance: {distance.toFixed(2)} km</p>\n          <p>Estimated Time: {duration} minutes</p>\n        </div>\n      )}\n\n      {cabOptions.length > 0 && distance && (\n        <>\n          <h3>Select Cab Type</h3>\n          <div className=\"cab-options\">\n            {cabOptions.map((cab) => (\n              <div\n                key={cab.id}\n                className={`cab-option ${selectedCab && selectedCab.id === cab.id ? \"selected\" : \"\"}`}\n                onClick={() => handleCabSelect(cab)}\n              >\n                <div className=\"cab-option-header\">\n                  <span className=\"cab-option-name\">{cab.name}</span>\n                  <span className=\"cab-option-price\">₹{cab.calculatedFare}</span>\n                </div>\n                <div className=\"cab-option-details\">\n                  <p>{cab.description}</p>\n                  <p>Capacity: {cab.capacity} persons</p>\n                </div>\n              </div>\n            ))}\n          </div>\n        </>\n      )}\n\n      {selectedCab && (\n        <div className=\"booking-summary\">\n          <h3>Booking Summary</h3>\n          <p>Cab Type: {selectedCab.name}</p>\n          <p>Pickup: {pickupAddress}</p>\n          <p>Destination: {destinationAddress}</p>\n          <p>Distance: {distance.toFixed(2)} km</p>\n          <p>Estimated Time: {duration} minutes</p>\n          <p>Fare: ₹{fare}</p>\n\n          <button className=\"btn btn-primary btn-block\" onClick={handleBooking} disabled={loading}>\n            {loading ? \"Processing...\" : \"Book Now\"}\n          </button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default BookCab\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}